// ============================================================================
// KORE STRESS TEST - Maximum Complexity for Native Compiler
// ============================================================================
// Testing: Structs, impl blocks, methods, loops, conditionals, math
// ============================================================================

// --- Data Structure ---
struct Point:
    x: Int
    y: Int

impl Point:
    pub fn new(x: Int, y: Int) -> Point:
        return Point { x: x, y: y }
    
    pub fn add(self, other: Point) -> Point:
        return Point { x: self.x + other.x, y: self.y + other.y }
    
    pub fn distance_squared(self) -> Int:
        return self.x * self.x + self.y * self.y

struct Vector3:
    x: Int
    y: Int
    z: Int

impl Vector3:
    pub fn new(x: Int, y: Int, z: Int) -> Vector3:
        return Vector3 { x: x, y: y, z: z }
    
    pub fn dot(self, other: Vector3) -> Int:
        return self.x * other.x + self.y * other.y + self.z * other.z
    
    pub fn length_squared(self) -> Int:
        return self.x * self.x + self.y * self.y + self.z * self.z

// --- Algorithms ---
fn gcd(a: Int, b: Int) -> Int:
    if b == 0:
        return a
    return gcd(b, a % b)

fn power(base: Int, exp: Int) -> Int:
    if exp == 0:
        return 1
    if exp == 1:
        return base
    let half = power(base, exp / 2)
    if exp % 2 == 0:
        return half * half
    return half * half * base

fn is_prime(n: Int) -> Int:
    if n < 2:
        return 0
    if n == 2:
        return 1
    if n % 2 == 0:
        return 0
    let i = 3
    loop:
        if i * i > n:
            break
        if n % i == 0:
            return 0
        i = i + 2
    return 1

fn sum_to_n(n: Int) -> Int:
    let total = 0
    for i in range(1, n + 1):
        total = total + i
    return total

fn triangle_number(n: Int) -> Int:
    return n * (n + 1) / 2

// --- Main Test ---
fn main():
    // Header
    println(11111111)
    
    // Test 1: Basic Math
    println(100001)  // Marker
    println(2 + 3)   // 5
    println(10 - 4)  // 6
    println(7 * 8)   // 56
    println(100 / 5) // 20
    println(17 % 5)  // 2
    
    // Test 2: Comparisons
    println(100002)  // Marker
    if 5 > 3:
        println(1)   // Should print 1
    if 3 < 5:
        println(2)   // Should print 2
    if 5 == 5:
        println(3)   // Should print 3
    if 4 != 5:
        println(4)   // Should print 4
    
    // Test 3: Nested Arithmetic
    println(100003)  // Marker
    let a = 10
    let b = 20
    let c = 30
    println(a + b + c)       // 60
    println((a + b) * 2)     // 60
    println(a * b + c)       // 230
    println((a + b) * (b + c)) // 1500
    
    // Test 4: Loop with accumulator
    println(100004)  // Marker
    let sum = 0
    for i in range(1, 11):
        sum = sum + i
    println(sum)  // 55 (sum of 1 to 10)
    
    // Test 5: Nested loops
    println(100005)  // Marker
    let product = 1
    for i in range(1, 5):
        for j in range(1, 3):
            product = product + 1
    println(product)  // 1 + (4 * 2) = 9
    
    // Test 6: Function calls
    println(100006)  // Marker
    println(sum_to_n(10))     // 55
    println(triangle_number(10)) // 55
    println(power(2, 8))      // 256
    println(gcd(48, 18))      // 6
    
    // Test 7: Prime check
    println(100007)  // Marker
    println(is_prime(2))   // 1
    println(is_prime(17))  // 1
    println(is_prime(18))  // 0
    println(is_prime(97))  // 1
    
    // Test 8: Struct creation
    println(100008)  // Marker
    let p1 = Point::new(3, 4)
    println(p1.x)  // 3
    println(p1.y)  // 4
    
    // Test 9: Struct methods
    println(100009)  // Marker
    let p2 = Point::new(1, 2)
    let dist = p1.distance_squared()
    println(dist)  // 3*3 + 4*4 = 25
    
    // Test 10: Vector3 operations
    println(100010)  // Marker
    let v1 = Vector3::new(1, 2, 3)
    let v2 = Vector3::new(4, 5, 6)
    let dot_product = v1.dot(v2)
    println(dot_product)  // 1*4 + 2*5 + 3*6 = 32
    let len_sq = v1.length_squared()
    println(len_sq)  // 1 + 4 + 9 = 14
    
    // Footer
    println(99999999)
    return 0
